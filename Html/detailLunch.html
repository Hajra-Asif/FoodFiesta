<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Detail Page</title>
    <link rel="shortcut icon" href="../Assets/foodfiestaicon.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
  <link rel="stylesheet" href="https://unicons.iconscout.com/release/v3.0.6/css/line.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  
  <!-- fontawesome cdn -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css"
    integrity="sha512-5Hs3dF2AEPkpNAR7UiOHba+lRSJNeM2ECkwxUIxC1Q/FLycGTbNapWXB4tP889k5T5Ju8fs4b1P5z/iB4nMfSQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!-- google fonts -->

  <!-- heading font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Serif+Text:ital@0;1&display=swap"
    rel="stylesheet">
  <!-- body font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Atma:wght@300;400;500;600;700&family=Bodoni+Moda:ital,opsz,wght@0,6..96,400..900;1,6..96,400..900&family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Honk&family=Mea+Culpa&family=MonteCarlo&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Parisienne&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
    rel="stylesheet">
    
    
    
    
    <link rel="stylesheet" href="../CSS/dtail.css">
        <link rel="stylesheet" href="../CSS/style.css">



        <style>
          /* profile modal */
      
          .profile-trigger {
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--blue);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
          }
      
          .popup-container {
            display: none;
            position: absolute;
            top: 60px;
            right: 20px;
            background: var(--white);
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            width: 300px;
            padding: 20px;
            z-index: 1000;
            box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
          }
      
          .popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
          }
      
          .close-btn {
            cursor: pointer;
            color: var(--icons);
          }
      
          .profile-section {
            text-align: center;
            /* margin-bottom: 20px; */
          }
      
          .profile-img {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: var(--grey);
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--blue);
            font-size: 24px;
            font-weight: bold;
          }
      
          .manage-account-btn {
            background-color: var(--brown);
            border: 1px solid var(--grey);
            color: var(--white);
            border-radius: 20px;
            padding: 8px 20px;
            margin: 10px 0;
            width: 100%;
          }
      
      
          .action-btn {
            width: 150px;
            flex: 1;
            padding: 6px 24px;
            border-radius: 20px;
            border: 1px solid var(--grey);
            background: var(--white);
            color: var(--bodytext);
            text-align: center;
            cursor: pointer;
            box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px;
          }
      
          .action-btn:hover {
            background-color: var(--blue);
            color: var(--white);
          }
      
          .footer-links {
            margin-top: 20px;
            text-align: center;
            color: var(--icons);
            font-size: 14px;
          }
      
          .footer-links a {
            color: var(--icons);
            text-decoration: none;
            margin: 0 10px;
          }
      
          #status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 10px;
            background: var(--blue);
            color: var(--white);
            border-radius: 8px;
            display: none;
          }
      
          /* logout modal */
      
          .modal-backdrop {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            display: none;
          }
      
          .modal-content {
            background: white;
            padding: 24px;
            border-radius: 8px;
            width: 90%;
            max-width: 320px;
            text-align: center;
          }
      
          .modal-text {
            margin-bottom: 24px;
            color: #333;
            font-size: 16px;
          }
      
          .modal-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
          }
      
          .btn {
            padding: 8px 24px;
            border-radius: 4px;
            border: none;
            font-size: 14px;
            cursor: pointer;
            transition: background-color 0.2s;
          }
      
          .btn-cancel {
            background-color: #f1f1f1;
            color: #333;
          }
      
          .btn-cancel:hover {
            background-color: #e5e5e5;
          }
      
          .btn-signout {
            background-color: var(--brown);
            color: white;
          }
      
          .btn-signout:hover {
            background-color: var(--blue);
            color: white;
      
          }
          .comment-card {
    transition: all 0.3s ease;
    background-color: var(--white);
    border: 1px solid var(--grey);
    box-shadow: 0 2px 4px var(--shadow);
    width: 100%;
    height: 180px;
    overflow: scroll;
}
        </style>
      

</head>

<body>




 <!-- first Navigation -->

 <div class="navigation">

  <div
    class="container-xxl d-flex justify-content-center justify-content-lg-between align-items-center flex-column-reverse flex-lg-row">

    <div class="header-section">
      <div class="header-icons">
        <a target="_blank" href="https://www.facebook.com/"><i class="fab fa-facebook"></i></a>
        <a target="_blank" href="https://www.youtube.com/"><i class="fab fa-youtube"></i></a>
        <a target="_blank" href="https://www.instagram.com/"><i class="fab fa-instagram"></i></a>
        <a target="_blank" href="https://www.linkedin.com/"><i class="fab fa-linkedin"></i></a>
      </div>
    </div>
    <div class="login" id="authentication">
      <a href="user" class="user"><i class="fa-regular fa-user ms-3"></i></a>
      <a href="#" class="login1">Login | </a>
      <a href="#" class="signup1">Register</a>
    </div>

    <button class="profile-trigger" id="profileTrigger">
      <h6 id="triggerText"></h6>
    </button>




  </div>
</div>
</div>

<!-- logout modal -->


<!-- Modal -->
<div class="modal-backdrop" id="signOutModal">
  <div class="modal-content">
    <div class="modal-text">
      Are you sure you want to sign out?
    </div>
    <div class="modal-buttons">
      <button class="btn btn-cancel" onclick="hideModal()">Cancel</button>
      <button id="signout" class="btn btn-signout" onclick="handleSignOut()">Sign Out</button>
    </div>
  </div>
</div>


<!-- Second Navigation -->
<nav class="navbar navbar-expand-lg container-xxl">
  <div class="container-xxl">
    <div class="logo">
      <a href="#"><img src="https://res.cloudinary.com/duo0iqvpr/image/upload/v1740489397/tdyxwipezi0yph72vusj.png"
          alt="logoimage"></a>
    </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-5 mb-2 mb-lg-0 d-flex flex-grow-1 justify-content-end gap-2">
        <li class="nav-item">
          <a href="../Html/ramzan.html" class="nav-link">Ramzan</a>
        </li>
        <li class="nav-item">
          <a href="../Html/drinks.html" class="nav-link">Drinks</a>
        </li>

        <li class="nav-item">
          <a href="../Html/desserts.html" class="nav-link">Desserts</a>
        </li>
        <li class="nav-item">
          <a href="../Html/breakfast.html" class="nav-link">Breakfast</a>
        </li>
        <li class="nav-item">
          <a href="../Html/lunchDinner.html" class="nav-link">Lunch / Dinner</a>
        </li>

      </ul>
      <div class="box">
        <div class="input-wrapper">
         
          <!-- <input placeholder="Aaj kya pakana hai?" class="input text-dark" name="text" type="text" id="inputt"> -->
        </div>
      </div>
    </div>
  </div>
</nav>















    <div class="container mt-5">
        <div id="con"></div>
    </div>

 <!-- Comments section -->
 <div class="container py-5">
    <div class="row mb-4">
        <div class="col-md-6">
        <div id="comments-container">
            <!-- Comments will be inserted here -->
        </div>
        </div>
        <div class="col-md-6">
            <h2 style="color: var(--blue);" class="mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="me-2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
              <span >  Comments </span>(<span id="comment-count">2</span>)
            </h2>
            <div class="stars">
                <span class="star"  data-value="1" >★</span>
                <span class="star"  data-value="2" >★</span>
                <span  class="star"  data-value="3" >★</span>
                <span  class="star"  data-value="4" >★</span>
                <span  class="star"  data-value="5" >★</span>
            </div>
            <form id="comment-form" class="mb-4">
                <div class="mb-3">
                    <input type="text" class="form-control" id="name-input" placeholder="Your name" required>
                </div>
                <div class="mb-3">
                    <textarea style="color:var(--bodytext);" class="form-control" id="comment-input" rows="4" placeholder="Write a comment..." required></textarea>
                </div>
                <button id="post" type="submit" class="btn btn-primary">Post Comment</button>
            </form>

           
        </div>
    </div>
</div>
<script>
  
  let searchParams = (params) => {
    let urll = new URLSearchParams(window.location.search);
    return urll.get(params)
  }
  let shre =  window.location.href

  let displayData = async()=>{
    let elem = document.getElementById('con');
    let idd = searchParams("id");

    if(idd){
        let fetchh = await fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${idd}`)
        let jsonData = await fetchh.json();
        let foodItem = jsonData.meals[0];

        if(!foodItem){
elem.innerHTML='food items not foundddd......'
        }

        elem.innerHTML=`
        
        
                <h1  style="color:var(--blue);"class="mb-4">Recipe Detail Page</h1>
            <div class="row mb-4">
                <div class="col-lg-6 mb-4">
                    <img id="recipeImage" src="${foodItem.strMealThumb}" alt="${foodItem.strMealThumb}" class="img-fluidMeal rounded">
                </div>
                <div class="col-lg-6">
                    <div id="title">
                        <h1 id="recipeTitle" class="mb-1">${foodItem.strMeal}</h1>
                        <p class="recipe-date mb-4" id="recipeDate">SEPTEMBER 23RD, 2023</p>
                        <div class="social-share mb-2">
                          <a href="#" id="view-modal" class="social-icon">
<i class="fas fa-share"></i>
</a>

<div class="popup">
<header>
<span style="color:var(--blue);">Share with your friends</span>
<div class="close"><i class="uil uil-times"></i></div>
</header>
<div class="content">
<p style="color:var(--bodytext);">Share this link via</p>
<ul class="icons p-0">
  <a href="https://www.facebook.com/?u=${shre}" target="_blank"><i class="fab fa-facebook-f"></i></a>
  <a href="https://twitter.com/intent/tweet?url=${shre}" target="_blank"><i class="fab fa-twitter"></i></a>
  <a href="https://www.instagram.com/?url=${shre}"  target="_blank"><i class="fab fa-instagram"></i></a>
  <a href="https://web.whatsapp.com/?url=${shre}"  target="_blank"><i class="fab fa-whatsapp"></i></a>
  <a href="https://t.me/share/url?url=${shre}" target="_blank"><i class="fab fa-telegram-plane"></i></a>
</ul>
<p>Or copy link</p>
<div class="field">
  <i style="color:var(--bodytext);" class="url-icon uil uil-link "></i>
  <input type="text" readonly value="${shre}">
  <button id="copy">Copy</button>
</div>
</div>
</div>
                            <a href="#" id="print-link" class="social-icon">
                                <i class="fas fa-print"></i> 
                            </a>
                            <a href="#" class="social-icon">
                                <i class="fas fa-heart"></i>
                            </a>
                        </div>
                        <div class="recipe-intro mt-2 mb-4" id="recipeIntro">
                            I am SO excited to share this recipe with you guys. I have been trying to perfect it for quite some time...
                        </div>
                    </div>
                    <div class="nutrition-info col-md-6 ps-3">
                        <h5 class="mb-3 ps-0">Nutrition Information</h5>
                        <div class="row mb-2">
                            <div class="col-8 nutrition-label">Servings</div>
                            <div class="col-4 nutrition-value" id="recipeServings">4</div>
                        </div>
                        <div class="row mb-2">
                            <div class="col-8 nutrition-label">Calories</div>
                            <div class="col-4 nutrition-value" id="recipeCalories">345</div>
                        </div>
                        <div class="row mb-2">
                            <div class="col-8 nutrition-label">Fat</div>
                            <div class="col-4 nutrition-value" id="recipeFat">7g</div>
                        </div>
                        <div class="row mb-2">
                            <div class="col-8 nutrition-label">Carbohydrates</div>
                            <div class="col-4 nutrition-value" id="recipeCarbs">57g</div>
                        </div>
                        <div class="row mb-2">
                            <div class="col-8 nutrition-label">Protein</div>
                            <div class="col-4 nutrition-value" id="recipeProtein">11g</div>
                        </div>
                    </div>
                </div>
                <div class="row mb-4">
                    <div class="col-md-6">
                        <h3 class="section-heading">Ingredients</h3>
                        <ul id="ingredients" class="ingredients-list"></ul>
                    </div>
                    <div class="col-md-6">
                        <h3 class="section-heading">Instructions</h3>
                        <p>${foodItem.strInstructions}</p>
                    </div>
                </div>
            </div>
                `;






// Populate the ingredients list dynamically
let ingredientsHtml = "";
for (let i = 1; i <= 20; i++) {
    const ingredient = foodItem[`strIngredient${i}`];
    const measure = foodItem[`strMeasure${i}`];
    if (ingredient && ingredient.trim()) {
        ingredientsHtml += `<li> <span class="measure">${measure ? measure : ""}</span> ${ingredient}</li>`;
    }
}
document.getElementById("ingredients").innerHTML = ingredientsHtml;
const printLink = document.querySelector('#print-link');
        // console.log(printLink);  
        if (printLink) {
            printLink.addEventListener('click', (e) => {
                e.preventDefault();
                window.print();
            });
        }
} else {
document.body.innerHTML = `<p>Recipe not found</p>`;
}
const viewBtn = document.querySelector("#view-modal"),
popup = document.querySelector(".popup"),
close = popup.querySelector(".close"),
field = popup.querySelector(".field"),
input = field.querySelector("input"),
copy = field.querySelector("#copy");

viewBtn.onclick = ()=>{ 
popup.classList.toggle("show");
}
close.onclick = ()=>{
viewBtn.click();
}

copy.onclick = ()=>{
input.select();
if(document.execCommand("copy")){
field.classList.add("active");
copy.innerText = "Copied";
setTimeout(()=>{
  window.getSelection().removeAllRanges(); 
  field.classList.remove("active");
  copy.innerText = "Copy";
}, 3000);
}
}

};


displayData()


    // Add the comments functionality
    // comment section

let comments = JSON.parse(localStorage.getItem('recipeComments')) || [
    {
        id: 1,
        author: 'John Doe',
        content: 'This recipe looks amazing!',
        timestamp: '2 hours ago',
        rating: 5 // Default rating for a comment
    },
    {
        id: 2,
        author: 'Jane Smith',
        content: 'I tried this recipe yesterday, it was delicious!',
        timestamp: '1 hour ago',
        rating: 4 // Default rating for a comment
    }
];

function saveComments() {
    localStorage.setItem('recipeComments', JSON.stringify(comments));
}

let selectedRating = 0; // Default value for the selected rating

// Dynamically update the stars for rating
const stars = document.querySelectorAll(".star");
const nameInput = document.getElementById("name-input");
const reviewText = document.getElementById("comment-input");
const submitBtn = document.getElementById("post");
const reviewsContainer = document.getElementById("comments-container");

stars.forEach((star) => {
    star.addEventListener("click", () => {
        const value = parseInt(star.getAttribute("data-value"));
        selectedRating = value; // Store the selected rating

        // Remove existing star classes
        stars.forEach((s) => s.classList.remove("one", "two", "three", "four", "five"));
        
        // Add appropriate class to each star based on the selected rating
        stars.forEach((s, index) => {
            if (index < value) {
                s.classList.add(getStarColorClass(value));
            }
        });

        // Mark the selected star
        stars.forEach((s) => s.classList.remove("selected"));
        star.classList.add("selected");
    });
});

// Helper function to get class for rating color
function getStarColorClass(value) {
    switch (value) {
        case 1: return "one";
        case 2: return "two";
        case 3: return "three";
        case 4: return "four";
        case 5: return "five";
        default: return "";
    }
}

// Handle comment submission
submitBtn.addEventListener("click", () => {
    const review = reviewText.value.trim();
    if (!selectedRating || !review || !nameInput.value.trim()) {
        alert("Please select a rating and provide a review before submitting.");
        return;
    }

    const newComment = {
        id: Date.now(),
        author: nameInput.value,
        content: review,
        timestamp: 'Just now',
        rating: selectedRating
    };

    comments.push(newComment);
    saveComments();
    renderComments(); // Update the comment display

    reviewText.value = ''; // Clear the comment input
    stars.forEach((s) => s.classList.remove("one", "two", "three", "four", "five", "selected"));
});

// Function to render the comments
function renderComments() {
    const container = document.getElementById('comments-container');
    container.innerHTML = comments.map(comment => createCommentHTML(comment)).join('');
    document.getElementById('comment-count').textContent = comments.length;
}

// Function to create HTML for each comment
function createCommentHTML(comment) {
    const initial = comment.author.charAt(0).toUpperCase();
    return `
        <div class="card mb-3 comment-card" data-id="${comment.id}">
            <div class="card-body">
                <div class="d-flex">
                    <div class="avatar me-3">${initial}</div>
                    <div class="flex-grow-1">
                        <div class="d-flex align-items-center mb-1">
                            <strong class="me-2">${comment.author}</strong>
                            <small class="text-muted">• ${comment.timestamp}</small>
                        </div>
                        <p class="mb-0">${comment.content}</p>
                        <div class="stars">
                            ${getStarIcons(comment.rating, comment.id)}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `;
}

// Function to generate star icons for each comment
function getStarIcons(rating, commentId) {
    let starsHtml = '';
    for (let i = 1; i <= 5; i++) {
        starsHtml += `
            <span 
                class="star ${i <= rating ? 'filled' : ''}" 
                data-id="${commentId}" data-rating="${i}" onclick="rateComment(${i}, ${commentId})">
                ★
            </span>
        `;
    }
    return starsHtml;
}

// Function to handle rating update when star is clicked
function rateComment(n, commentId) {
    const comment = comments.find(c => c.id === parseInt(commentId));
    if (comment) {
        comment.rating = n; // Update the rating for this comment
        saveComments(); // Save to localStorage
        renderComments(); // Re-render the comments with the updated rating
    }
}

// Initialize and render the comments when the page loads
function init() {
    renderComments();
}

// Initialize the page with existing comments
init();
</script>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
<!-- <script type="module" src="./firebase/firebaseconfig.js"></script> -->

</body>
</html>